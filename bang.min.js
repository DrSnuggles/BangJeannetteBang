var Bang=function(){function e(){ui_score.innerText=1*totalBangs+1*p}function t(){xhr.open("GET",apiUrl,!0),xhr.send()}function n(){var e="bangs="+p;xhr.open("POST",apiUrl,!0),xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhr.send(e),p=0}function a(){g.addEventListener("mouseup",o,!1),g.addEventListener("mousedown",o,!1),g.addEventListener("mousemove",o,!1),g.addEventListener("click",o,!1),g.addEventListener("contextmenu",o,!1),g.addEventListener("touchstart",o,!1),g.addEventListener("touchcancel",o,!1),g.addEventListener("touchmove",o,!1),ui_cont.innerHTML="",g.classList.add("udcursor"),u(0),AudioBang.play(),AudioBang.addEventListener("ended",r,!1),cancelAnimationFrame(h),h=requestAnimationFrame(i)}function o(e){E=e.layerX?navigator.userAgent.toLowerCase().indexOf("firefox")>-1?{x:e.layerX/(e.target.offsetWidth-1),y:(e.clientY-e.srcElement.offsetTop)/(e.target.offsetHeight-1),dirX:e.movementX,dirY:e.movementY}:{x:e.layerX/(e.target.offsetWidth-1),y:e.layerY/(e.target.offsetHeight-1),dirX:e.movementX,dirY:e.movementY}:{x:(e.targetTouches[0].pageX-e.target.offsetLeft)/(e.target.offsetWidth-1),y:(e.targetTouches[0].pageY-e.target.offsetTop)/(e.target.offsetHeight-1),pageY:e.targetTouches[0].pageY,offset:e.target.offsetTop},e.preventDefault()}function r(){g.removeEventListener("mouseup",o),g.removeEventListener("mousedown",o),g.removeEventListener("mousemove",o),g.removeEventListener("click",o),g.removeEventListener("contextmenu",o),g.removeEventListener("touchstart",o),g.removeEventListener("touchcancel",o),g.removeEventListener("touchmove",o),f.drawImage(d[11],0,0,g.width,g.height),f.drawImage(d[12],0,0,g.width,g.height),cancelAnimationFrame(h),h=requestAnimationFrame(c),ui_cont.innerHTML='<button onclick="Bang.restart();">START</button>',g.classList.remove("udcursor"),n()}function i(){h=requestAnimationFrame(i);var e=s();x!==e&&u(e)}function s(){return Math.floor(E.y*l)}function u(t){t>=l&&(t=l-1),t<0&&(t=0),f.drawImage(d[t],0,0,g.width,g.height),0===lastExtreme?l-t<=1&&(lastExtreme=1,p++,e()):t<=1&&(lastExtreme=0,p++,e()),x=t}function c(){h=requestAnimationFrame(c),f.drawImage(d[x],0,0,g.width,g.height);var e=new Date,t=e.getTime(),n=10*Math.sin(t/50),a=20*Math.cos(t/80);f.drawImage(d[11],0,n,g.width,g.height),f.drawImage(d[12],0,a,g.width,g.height)}function m(){d[0].width>0?setTimeout(function(){u(0)},500):setTimeout(function(){m()},500)}console.info("Jeannette Bang - Â©2019 by Gnax");var d,g,f,h,v={},l=11,E={x:0,y:0},x=-1,p=0;return totalBangs=0,lastExtreme=0,xhr=new XMLHttpRequest,apiUrl="https://script.google.com/macros/s/AKfycbyEaUuTDSEQFs3DXtgao3pLxItANEFSttbaMxqKu1vjfsz25MA/exec",xhr.onload=function(t){totalBangs=t.target.responseText,e()},setInterval(function(){Bang.updateScore()},1e4),t(),v.init=function(e){d=document.getElementsByClassName("bang-container")[0].getElementsByTagName("img"),g=e,f=g.getContext("2d"),m()},v.restart=function(){a()},v.updateScore=t,v}();